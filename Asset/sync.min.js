!function(a,b,d){var e=b.cookie.replace(/(?:(?:^|.*;\s*)TR\.color\.scheme\.real\s*\=\s*([^;]*).*$)|^.*$/,"$1"),c=a.matchMedia("(prefers-color-scheme: dark)");function f(b){var c;fetch("?controller=SyncController&action=sync&plugin=ThemeRevision&prefer="+(c=b.matches?"dark":"light"),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(a=>a.json()).then(d=>{var b={reload:d.reload,remoteScheme:d.remoteScheme,localScheme:c,realScheme:e};"auto"==b.remoteScheme&&(b.reload||b.localScheme!=b.realScheme)&&a.location.reload()})}b.location.search.indexOf("AuthController")>=0||(c.addEventListener("change",a=>{f(a)}),a.addEventListener("load",a=>{f(c)}))}(window,document,KB)
