!function(c,d,f){var a,b,g=(a=/TR\.color\.scheme\.real\s*\=\s*(light|dark)/g,null==(b=d.cookie.match(a))?"":b[b.length-1].replace(a,"$1")),e=c.matchMedia("(prefers-color-scheme: dark)");function h(a){var b=a.matches?"dark":"light";fetch("?controller=SyncController&action=sync&plugin=ThemeRevision&prefer="+b,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(a=>a.json()).then(d=>{var a={reload:d.reload,remoteScheme:d.remoteScheme,localScheme:b,realScheme:g};"auto"==a.remoteScheme&&(a.reload||a.localScheme!=a.realScheme)&&c.location.reload()})}e.addEventListener("change",a=>{h(a)}),c.addEventListener("load",a=>{h(e)})}(window,document,KB)